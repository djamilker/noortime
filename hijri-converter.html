<!DOCTYPE html>
<html lang="en" class="bg-gradient-to-br from-green-50 to-white">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NoorTime ‚Äì Hijri Converter (Pure JS)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>

<body class="min-h-screen text-gray-800 flex flex-col items-center">
  <!-- HEADER -->
  <header class="w-full max-w-6xl px-6 py-4 flex justify-between items-center bg-white/70 backdrop-blur sticky top-0 z-20 shadow-sm rounded-b-xl">
    <div class="flex items-center gap-2 font-bold text-green-700 text-xl">üïå <span>Noor</span></div>
    <nav class="hidden md:flex gap-6 text-sm text-gray-700 font-medium">
      <a href="index.html" class="hover:text-green-600">Prayer Times</a>
      <a href="hijri-converter.html" class="hover:text-green-600 font-bold underline">Hijri Converter</a>
    </nav>
    <button class="border border-gray-300 p-2 rounded-lg hover:bg-gray-100">‚öôÔ∏è</button>
  </header>

  <!-- MAIN CONTENT -->
  <main class="max-w-xl w-full px-6 py-10 mx-auto">
    <h2 class="text-2xl font-bold text-green-700 mb-4 text-center">üìÖ Hijri ‚Üî Gregorian Converter (Pure JS)</h2>

    <div class="bg-white border rounded-xl shadow p-6 space-y-6">
      <!-- Gregorian to Hijri -->
      <div>
        <label class="block text-sm font-medium mb-1 text-gray-600">Gregorian to Hijri</label>
        <input type="date" id="gregorianInput" class="w-full border rounded px-3 py-2 text-sm" />
        <button onclick="convertToHijri()" class="mt-2 text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Convert</button>
        <p id="hijriOutput" class="text-sm text-green-700 mt-2"></p>
      </div>

      <!-- Hijri to Gregorian -->
      <div class="border-t pt-4">
        <label class="block text-sm font-medium mb-1 text-gray-600">Hijri to Gregorian</label>
        <input type="text" id="hijriInput" placeholder="1445-10-01" class="w-full border rounded px-3 py-2 text-sm" />
        <button onclick="convertToGregorian()" class="mt-2 text-sm bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Convert</button>
        <p id="gregorianOutput" class="text-sm text-green-700 mt-2"></p>
      </div>
    </div>
  </main>

  <footer class="text-center text-xs text-gray-400 py-6">
    NoorTime.org ¬∑ Pure JavaScript ¬∑ No external APIs or libraries
  </footer>

  <!-- JS Conversion Logic -->
  <script>
    function gregorianToHijri(gDate) {
      const day = gDate.getDate();
      const month = gDate.getMonth();
      const year = gDate.getFullYear();
      const jd = Math.floor((1461 * (year + 4800 + (month - 14) / 12)) / 4)
                + Math.floor((367 * (month - 2 - 12 * ((month - 14) / 12))) / 12)
                - Math.floor((3 * Math.floor((year + 4900 + (month - 14) / 12) / 100)) / 4)
                + day - 32075;
      const l = jd - 1948440 + 10632;
      const n = Math.floor((l - 1) / 10631);
      let r = l - 10631 * n + 354;
      let j = (Math.floor((10985 - r) / 5316)) * Math.floor((50 * r) / 17719) + Math.floor(r / 5670) * Math.floor((43 * r) / 15238);
      r = r - Math.floor((30 - j) / 15) * Math.floor((17719 * j) / 50) - Math.floor(j / 16) * Math.floor((15238 * j) / 43) + 29;
      const m = Math.floor((24 * r) / 709);
      const d = r - Math.floor((709 * m) / 24);
      const y = 30 * n + j - 30;
      return { day: d, month: m, year: y };
    }

    function hijriToGregorian(hy, hm, hd) {
      const jd = Math.floor((11 * hy + 3) / 30) + 354 * hy + 30 * hm - Math.floor((hm - 1) / 2) + hd + 1948440 - 385;
      let l = jd + 68569;
      const n = Math.floor((4 * l) / 146097);
      l = l - Math.floor((146097 * n + 3) / 4);
      const i = Math.floor((4000 * (l + 1)) / 1461001);
      l = l - Math.floor((1461 * i) / 4) + 31;
      const j = Math.floor((80 * l) / 2447);
      const d = l - Math.floor((2447 * j) / 80);
      l = Math.floor(j / 11);
      const m = j + 2 - 12 * l;
      const y = 100 * (n - 49) + i + l;
      return { day: d, month: m, year: y };
    }

    function convertToHijri() {
      const input = document.getElementById('gregorianInput').value;
      const output = document.getElementById('hijriOutput');
      if (!input) return output.textContent = 'Please select a date.';
      const [year, month, day] = input.split('-').map(Number);
      const gDate = new Date(year, month - 1, day);
      const hijri = gregorianToHijri(gDate);
      output.textContent = `Hijri: ${hijri.day} / ${hijri.month} / ${hijri.year}`;
    }

    function convertToGregorian() {
      const input = document.getElementById('hijriInput').value;
      const output = document.getElementById('gregorianOutput');
      const match = input.match(/^(\d{4})-(\d{2})-(\d{2})$/);
      if (!match) return output.textContent = 'Format must be YYYY-MM-DD';
      const [y, m, d] = input.split('-').map(Number);
      const g = hijriToGregorian(y, m, d);
      output.textContent = `Gregorian: ${g.day} / ${g.month} / ${g.year}`;
    }
  </script>
</body>
</html>
